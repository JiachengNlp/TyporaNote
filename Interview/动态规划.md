### 哈希函数

1. 输入域无穷，输出域有限S
2. 输入值一定，输出一定
3. 不同输入，输出相同（哈希碰撞）
4. 离散性和均匀性
5. 输入 -> 输出 ->模%一个数m -> 保证0-m-1上，作用是减少作用域大小
6. 哈希实现
7. 实际用可以理解O(1)，理论上O(logN)

### 布隆过滤器

定义0~m-1位图，K个Hash函数。先决定位图，再根据m和样本量n决定k值

1. 可以误判（白名单变为黑名单）

2. 极大减少内存

3. **没有删除行为**

4. 跟单样本大小无关

5. 公式：

   ![image-20210616090855956](/Users/djc/Library/Application Support/typora-user-images/image-20210616090855956.png)



### 一致性哈希

讨论数据服务器组织，减少新增机器后迁移数据的代价

1. Hash Key选择（高、中、低频数量都很多的，做到负载均衡）
2. 没有模的概念
3. 机器少情况下没办法分布在哈希环（问题点）虚拟节点等比例抢资源技术解决
4. 新增机器后，负债均衡会打破（问题点）虚拟节点等比例抢资源技术解决
5. 管理负载

### 相关题目

###### 一、40亿个没符号正数，只有1G内存，如何知道出现次数最多是哪个数

Int 字节数为4B，所以用一个HasMap会容易内存爆。核心是利用性质5把数分散在不同小文件，再算出每个小文件出现次数最多的数，最后不同文件进行比较得出答案。

###### 二、设计RandomPool结构

增加、删除、随机等概率返回Key